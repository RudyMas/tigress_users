{% extends 'datatable.twig' %}
{% block css %}
    {{ parent() }}
    <link href="/vendor/olsc/gebruikers/public/css/gebruikers/rechten.css" rel="stylesheet">
{% endblock %}
{% block js %}
    {{ parent() }}
    <script src="/vendor/olsc/gebruikers/public/javascript/gebruikers/rechten.js"></script>
{% endblock %}
{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-sm-9">
                <h3>Gebruikersrechten</h3>
            </div>
            <div class="col-sm-3 text-end">
                <a class="btn btn-primary" href="{{ BASE_URL }}/gebruikers"><i class="fa fa-arrow-left"></i> Terug</a>
            </div>
        </div>
        <form id="form" method="post" enctype="multipart/form-data">
            <div class="row">
                <div class="col-sm-12">
                    <fieldset class="mt-3">
                        <input type="hidden" id="id" name="id" value="{{ user.id }}">
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label for="naam"><b>Naam</b></label>
                                <input class="form-control" id="naam" name="naam" type="text" placeholder="naam"
                                       value="{{ user.last_name }}" disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label for="voornaam"><b>Voornaam</b></label>
                                <input class="form-control" id="voornaam" name="voornaam" type="text"
                                       placeholder="voornaam"
                                       value="{{ user.first_name }}" disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <label for="login"><b>Login</b></label>
                                <input class="form-control" id="login" name="login" type="text" placeholder="login"
                                       value="{{ user.modified|date('d-m-Y, H:i:s') }}" disabled>
                            </div>
                            <div class="col-md-9 mb-3">
                                <label for="email"><b>Email</b></label>
                                <input class="form-control" id="email" name="email" type="text" placeholder="email"
                                       value="{{ user.email }}" disabled>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="functie_funeva"><b>Functie voor Fun & Eva:</b></label>
                                <select class="form-select" id="functie_funeva" name="functie_funeva">
                                    {% for key, value in optionsFunctieFunEva %}
                                        <option value="{{ key }}"
                                                {% if key == user.functie_funeva %}selected{% endif %}>{{ value }}</option>
                                    {% endfor %}
                                </select>
                                <input type="hidden" name="functie_funeva_id" value="{{ user.functie_funeva_id }}">
                            </div>
                        </div>
                    </fieldset>
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <input type="button" name="btn" value="Opslaan" id="submitBtn" data-bs-toggle="modal"
                                   data-bs-target="#confirm-submit" class="btn btn-success"/>
                            <a class="btn btn-danger" href="{{ BASE_URL }}/gebruikers">Annuleren</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <fieldset class="mt-3">
                        <legend><h3>Rechten toekennen voor volgende tegels:</h3></legend>
                        <div class="mt-4">
                            <table class="table table-sm table-bordered">
                                <thead class="table-light">
                                <tr>
                                    <th>Tegel</th>
                                    <th class="text-center">Toegang</th>
                                    <th class="text-center">Lees</th>
                                    <th class="text-center">Schrijf</th>
                                    <th class="text-center">Verwijder</th>
                                </tr>
                                </thead>
                                <tbody id="checkboxes">
                                {% for key, value in rechten %}
                                    <tr>
                                        <th colspan="5">{{ key }}</th>
                                    </tr>
                                    {% for keySub, valueSub in value %}
                                        <tr>
                                            <td>{{ keySub }} {% if valueSub.all %}(<b><span class="text-success">Alle rechten</span></b>){% endif %}
                                            </td>
                                            <td class="text-center">
                                                <input type="checkbox"
                                                       name="rechten[{{ valueSub.special_rights }}][access]"
                                                       value="1" {% if valueSub.access %}checked{% endif %}>
                                            </td>
                                            <td class="text-center">
                                                <input type="checkbox"
                                                       name="rechten[{{ valueSub.special_rights }}][read]"
                                                       value="1" {% if valueSub.read %}checked{% endif %}>
                                            </td>
                                            <td class="text-center">
                                                <input type="checkbox"
                                                       name="rechten[{{ valueSub.special_rights }}][write]"
                                                       value="1" {% if valueSub.write %}checked{% endif %}>
                                            </td>
                                            <td class="text-center">
                                                <input type="checkbox"
                                                       name="rechten[{{ valueSub.special_rights }}][delete]"
                                                       value="1" {% if valueSub.delete %}checked{% endif %}>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </fieldset>
                    <div class="row mb-2">
                        <div class="col-md-3">
                            <input type="button" name="btn" value="Opslaan" id="submitBtn" data-bs-toggle="modal"
                                   data-bs-target="#confirm-submit" class="btn btn-success"/>
                            <a class="btn btn-danger" href="{{ BASE_URL }}/gebruikers">Annuleren</a>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <!-- Modal Dialog -->
    <div class="modal fade" id="confirm-submit" tabindex="-1" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Opgelet!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Ben je zeker dat je de rechten voor deze gebruiker wilt aanpassen?</p>
                </div>
                <div class="modal-footer">
                    <a href="#" id="submit" class="btn btn-success success">Opslaan</a>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Annuleer</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
